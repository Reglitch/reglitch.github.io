function WP_Stretch(t){var e=600;t.find(".db-description").each(function(){var t=jQuery(this),i=t.width(),n=!1;t.find(".tooltip-table tr, .db-title, h2, h3, .db-achievement-criteria > li").each(function(){for(var s=parseInt(jQuery(this).attr("data-height"),10)||25;jQuery(this).height()>s&&e>i;)n=!0,i+=10,t.width(i)}),n&&t.width(i+20)})}(function(){window.HTMLDiff=function(){function t(t,e){this.a=t,this.b=e}return t.prototype.diff=function(){var t;return t=this.diff_list(this.tokenize(this.a),this.tokenize(this.b)),this.update(this.a,t.filter(function(t){var e,i;return e=t[0],i=t[1],"+"!==e})),this.update(this.b,t.filter(function(t){var e,i;return e=t[0],i=t[1],"-"!==e}))},t.prototype.parseTextNodes=function(t,e){var i;return(i=function(t){if(null==t)return!1;var n,s,o,a,r,l,c,h,u;if(3!==t.nodeType){for(u=function(){var e,i,s,o;for(s=t.childNodes,o=[],e=0,i=s.length;i>e;e++)n=s[e],o.push(n);return o}(),r=0,c=u.length;c>r;r++)if(a=u[r],o=i(a)){for(l=0,h=o.length;h>l;l++)s=o[l],t.insertBefore(s,a);t.removeChild(a)}return!1}return/^\s*$/.test(t.nodeValue)?void 0:e(t)})(t)},t.prototype.tokenize=function(t){var e;return e=[],this.parseTextNodes(t,function(t){return e=e.concat(t.nodeValue.split(" ")),!1}),e},t.prototype.update=function(t,e){var i;return i=0,this.parseTextNodes(t,function(t){var n,s,o,a,r,l,c,h,u,d,p,f;for(c=i,n=i+t.nodeValue.split(" ").length,i=n,r=function(){var t,i,s,o,a;for(s=e.slice(c,n),a=[],t=0,i=s.length;i>t;t++)o=s[t],h=o[0],u=o[1],"="===h?a.push(u):a.push("<ins>"+u+"</ins>");return a}(),r=r.join(" ").replace(/<\/ins> <ins>/g," ").replace(/<ins> /g," <ins>").replace(/[ ]<\/ins>/g,"</ins> ").replace(/<ins><\/ins>/g,""),a=[],o=document.createTextNode(""),a.push(o),f=r.split(/(<\/?ins>)/),d=0,p=f.length;p>d;d++)switch(l=f[d]){case"<ins>":s=document.createElement("ins"),a.push(s),o=document.createTextNode(""),s.appendChild(o);break;case"</ins>":o=document.createTextNode(""),a.push(o);break;default:o.nodeValue=l}return a.filter(function(t){return!(3===t.nodeType&&""===t.nodeValue)})})},t.prototype.diff_list=function(t,e){var i,n,s,o,a,r,l,c,h,u,d,p,f,m,v,g;for(a={},i=0,p=t.length;p>i;i++)u=t[i],u in a||(a[u]=[]),a[u].push(i);for(o=function(){var e,n;for(n=[],i=0,e=t.length;e>=0?e>i:i>e;e>=0?i++:i--)n.push(0);return n}(),c=l=r=0,n=0,f=e.length;f>n;n++){for(u=e[n],h=function(){var e,n;for(n=[],i=0,e=t.length;e>=0?e>i:i>e;e>=0?i++:i--)n.push(0);return n}(),g=null!=(v=a[u])?v:[],d=0,m=g.length;m>d;d++)s=g[d],h[s]=(s&&o[s-1]?1:0)+1,h[s]>r&&(r=h[s],c=s-r+1,l=n-r+1);o=h}return 0===r?[].concat(function(){var e,i,n;for(n=[],e=0,i=t.length;i>e;e++)u=t[e],n.push(["-",u]);return n}(),function(){var t,i,n;for(n=[],t=0,i=e.length;i>t;t++)u=e[t],n.push(["+",u]);return n}()):[].concat(this.diff_list(t.slice(0,c),e.slice(0,l)),function(){var t,i,n,s;for(n=e.slice(l,l+r),s=[],t=0,i=n.length;i>t;t++)u=n[t],s.push(["=",u]);return s}(),this.diff_list(t.slice(c+r),e.slice(l+r)))},t}()}).call(this),function(t){var e=document.getElementsByTagName("script"),i=e[e.length-1].src,n=function(t){return t+"px"},s=function(t,e){this.x=t||0,this.y=e||0},o=function(){o.prototype.initialize.apply(this,arguments)};o.Ready=!1,o.bindEvent=function(t,e,i){var n=this;if("load"===e){var s=i;t.addEventListener?(e="DOMContentLoaded",i=function(){s.call(n),n.Ready=!0}):t.attachEvent?(e="onreadystatechange",t=document,i=function(){"complete"!==document.readyState||n.Ready||(s.call(n),n.Ready=!0)}):(e="onload",i=function(){s.call(n),n.Ready=!0})}else t.addEventListener||t.attachEvent||(e="on"+e);return t.addEventListener?t.addEventListener(e,function(t){i.call(n,t)}):t.attachEvent?t.attachEvent(e,function(t){i.call(n,t)}):t[e]=function(t){i.call(n,t)},this},o.unbindEvent=function(t,e,i){var n=this;if("load"===e){var s=i;t.removeEventListener?(e="DOMContentLoaded",i=function(){s.call(n),n.Ready=!0}):t.detachEvent?(e="onreadystatechange",t=document,i=function(){"complete"!==document.readyState||n.Ready||(s.call(n),n.Ready=!0)}):(e="onload",i=function(){s.call(n),n.Ready=!0})}else t.removeEventListener||t.detachEvent||(e="on"+e);return t.removeEventListener?t.removeEventListener(e,function(t){i.call(n,t)}):t.detachEvent?t.detachEvent(e,function(t){i.call(n,t)}):t[e]=null,this},o.prototype={Path:i,Cache:{},Options:{AdvancedTooltips:!1,HashAliases:{},LoadingText:"Loading&hellip;",Namespace:"db-tooltip",Offset:new s(10,10),Paths:[],ExtraRegexes:[],Url:null,WatchComplete:null},MousePosition:new s(0,0),EventHandler:null,CurrentElement:null,CurrentTitle:null,Timeout:null,LastPosition:new s,FirstParty:!1,RegEx:null,MouseOverDocument:!1,Disabled:!1,initialize:function(){var t=this;switch(arguments.length){case 0:return!1;case 1:"object"==typeof arguments[0]?this.setOptions(arguments[0]):this.setOptions({Url:arguments[0]});break;case 2:this.setOptions({Url:arguments[0],Namespace:arguments[1]})}var e=document.getElementsByTagName("script"),i=e[e.length-1],n=i.src.match(/(?:.js\?)(.*)$/);if(n&&n.length>1){var s=n[1].split(/\&/);for(var a in s)if(s.hasOwnProperty(a)){var r=s[a].split(/=/);(r[0]=r[1])&&(window[r[1]]=this)}}if(void 0===this.Options.Url)return!1;window.addEventListener&&(this.EventHandler="addEventListener");var l=/^(?:.*\/\/)?(?:[^\.]+)?((.*)\.(com|net|org|local|dev))$/;try{this.FirstParty=this.Options.Url.match(l)[2]===document.location.host.match(l)[2]}catch(c){}for(var e=document.getElementsByTagName("script"),a=0,h=e.length;h>a;a++){var i=e[a];if(i.src.endsWith("/syndication/tt.js")){this.Path=i.src,this.FirstParty=!1;break}}var u=this.Options.Paths;for(u=u.length>0?u.join("|"):"",u=u.replace(/\//,"\\/"),this.RegEx=new RegExp(this.Options.Url.replace(l,"$2.(?:com|net|org|local|dev)/"+(this.Options.Paths.length>0?"("+this.Options.Paths.join("|")+")/([\\d]+(?:[\\w-]+)?)(?:\\?(simple|advanced))?(?:#(\\d+)-(\\d+))?":""))),o.Ready?this.watchElligibleElements():o.bindEvent.call(this,window,"load",this.watchElligibleElements),window.CurseTips=window.CurseTips||{};window.CurseTips[this.Options.Namespace];)this.Options.Namespace+="-"+(new Date).getTime();window.CurseTips[this.Options.Namespace]=this,o.bindEvent.call(this,document,"mouseover",function(){return this.MouseOverDocument||(this.MouseOverDocument=!0),!1}),o.bindEvent.call(this,document,"mouseout",function(){this.MouseOverDocument&&(this.handleTooltipData(),this.MouseOverDocument=!1)});try{Cobalt.runOnHtmlInsert(function(e){t.watchElements(e.find("a[href], *[data-tooltip-href]"))})}catch(c){}},disable:function(){this.Disabled=!0},enable:function(){this.Disabled=!1},toggle:function(){this.Disabled=!this.Disabled},setOptions:function(t){var e={};for(var i in this.Options)this.Options.hasOwnProperty(i)&&(e[i]=this.Options[i]);for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);this.Options=e},watchElligibleElements:function(){this._watchElements(this.getElligibleElements())},watchElements:function(t){t.nodeName&&!t.length&&(t=[t]),t=this._processElements(t),t.length&&this._watchElements(t)},_watchElements:function(t){for(var e in t)if(t.hasOwnProperty(e)){var i=t[e];if(!i.nodeName)continue;o.bindEvent.call(this,i,"mouseover",this.createTooltip),o.bindEvent.call(this,i,"mouseout",function(t){this.handleTooltipData(),o.unbindEvent.call(this,t.currentTarget,"mousemove",this.moveTooltip)})}"function"==typeof this.Options.WatchComplete&&this.Options.WatchComplete(t)},_getURLParams:function(t){try{var e=t.split("?")[1].match(/(.*?)(#|$)/)[1].split("&")}catch(i){return{}}var n={};for(var s in t.split("?")[1].split("&"))if(e.hasOwnProperty(s)){var o=e[s].split("=");n[o[0]]=o[1]}return n},_isValidToolipHref:function(t){var e=t.split(/(\?|#)/)[0],i=document.location.href.split(/(\?|#)/)[0];if(e===i){var n=this._getURLParams(t),s=this._getURLParams(document.location.href);for(var o in this.Options.Arguments)if(this.Options.Arguments.hasOwnProperty(o)){var a=this.Options.Arguments[o];if(n[a]!==s[a])return!0}return!1}return!0},_processElements:function(t){var e=[];for(var i in t)if(t.hasOwnProperty(i)&&!isNaN(i)){var n,s=t[i];if(!s.nodeName)continue;try{var n=s.getAttribute("data-tooltip-href")||s.href;if(!this._isValidToolipHref(n))continue}catch(o){}if(!n)continue;try{if("true"===s.getAttribute("data-disable-tip"))continue}catch(o){}"/"===n[0]&&"/"!==n[1]&&(n="//"+document.location.host+n),n=n.replace(/\/(#|\?|$)/,"$1").replace(/#$/,"");for(var a in this.Options.HashAliases)if(this.Options.HashAliases.hasOwnProperty(a)){var r=n.split("#");if(!r[1])continue;r[1]===a&&(r[0]+=(r[0].search(/\?/)>=0?"&":"?")+this.Options.HashAliases[a],n=r[0],s.setAttribute("data-tooltip-href",n))}if(this.FirstParty&&n.search(new RegExp(document.location.host+document.location.pathname+"$"))>-1)continue;if("javascript:"===n.substr(0,11)||0===n.length||"#"===n)continue;var l=n.match(this.RegEx);if(l)-1===n.substr(0,n.search(this.RegEx)).search(/\/\//)&&(n="//"+n),s.setAttribute("data-tooltip-href",n),l[3]&&s.setAttribute("data-tooltip-mode",l[3]),l[4]&&l[5]&&(s.setAttribute("data-tooltip-ver1",l[4]),s.setAttribute("data-tooltip-ver2",l[5])),e.push(s);else{var c=!1;for(var h in this.Options.ExtraRegexes)if(this.Options.ExtraRegexes.hasOwnProperty(h)){var u=n.match(this.Options.ExtraRegexes[h]);!c&&u&&(s.setAttribute("data-tooltip-custom","true"),c=!0,e.push(s))}}}return e},getElligibleElements:function(){if(document.querySelectorAll)var t=document.querySelectorAll("a[href], *[data-tooltip-href]");else{var e=document.getElementsByTagName("body")[0].getElementsByTagName("*"),t=[];for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];("A"===n.nodeName||n.getAttribute("data-tooltip-href"))&&t.push(n)}}return this._processElements(t)},createTooltip:function(t){if(this.Disabled||!t.currentTarget.getAttribute("data-tooltip-href"))return!1;var e,i=t.currentTarget,n=i.getAttribute("data-tooltip-href"),s=i.getAttribute("data-tooltip-custom"),a=n,r=null,l=null;if(!s){n.split(/\?/)[1];a=n.split(/\//),r=a.pop().match(/^(?:(\d+)(?:-[-\w]+?)?)(\?.*?)?(#.*)?$/),l=r&&r.length>1?r[1]:null}var c=[],h=null;if(this.MousePosition.x=t.clientX,this.MousePosition.y=t.clientY,!s){if(r&&r.length)for(var u=2;u<r.length;u++)if(r[u])switch(r[u][0]){case"?":c=r[u].substr(1).split(/&/);break;case"#":h=r[u]}if(!l)return!1;a.push(l),a=a.join("/"),(this.Options.AdvancedTooltips&&"simple"!==i.getAttribute("data-tooltip-mode")||"advanced"===i.getAttribute("data-tooltip-mode"))&&c.push("advanced=1"),c.push("callback=window.CurseTips['"+this.Options.Namespace+"'].handleTooltipData")}(e=document.getElementById("db-tooltip-container"))?e.innerHTML="":(e=document.createElement("div"),e.id="db-tooltip-container",document.getElementsByTagName("body")[0].appendChild(e)),e.className=this.Options.Namespace,i.getAttribute("data-tooltip-ver1")&&i.getAttribute("data-tooltip-ver2")?(s||(a+="/dual-tooltip/"+i.getAttribute("data-tooltip-ver1")+"/"+i.getAttribute("data-tooltip-ver2")),e.className+=" diff"):s||(a+="/tooltip"),s||(a+="?"+c.join("&"),"file:"!==location.protocol&&(a=a.replace(/^http(s)?:/,""))),e.style.position="fixed",e.style.zIndex=9999,e.style.whiteSpace="nowrap";var d=document.createElement("h3"),p=document.createElement("div"),f=document.createElement("div");if(d.style.display="none",p.className="body",f.className="url",this.Options.ShowURL?f.innerText=n.replace(/^http(s)?:\/\//,""):f.style.display="none",e.appendChild(d),e.appendChild(p),e.appendChild(f),o.bindEvent.call(this,i,"mousemove",this.moveTooltip),this.Cache[document.location.protocol+a])this.handleTooltipData(this.Cache[document.location.protocol+a]);else{var m=document.createElement("script");m.src=a,m.setAttribute("data-tooltip-href",n),document.getElementsByTagName("head")[0].appendChild(m),p.innerHTML=this.Options.LoadingText,e.style.display="block"}},handleTooltipData:function(t){var e=document.getElementById("db-tooltip-container");if(!e)return!1;if(!t)return e.style.display="none",!1;if("file:"===location.protocol&&(t.Tooltip=t.Tooltip.replace(/src="\/\//g,'src="http://')),this.Cache[t.Url]=t,e.className===this.Options.Namespace+" diff"){var i=document.createElement("div");i.innerHTML=t.Tooltip;var n=i.getElementsByClassName("db-tooltip");if(n.length>2){var s=new HTMLDiff(n[1],n[2]);s.diff(),t.Tooltip=i.innerHTML}}e.getElementsByClassName("body")[0].innerHTML=t.Tooltip,e.style.display="block";var o=e.getElementsByClassName("db-description");for(var a in o)o.hasOwnProperty(a)&&void 0!==o[a].style&&(o[a].style.whiteSpace="normal");this.moveTooltip()},moveTooltip:function(t){t?(this.MousePosition.x=t.clientX,this.MousePosition.y=t.clientY):t={clientX:this.MousePosition.x,clientY:this.MousePosition.y},this.Options.Offset.x&&this.Options.Offset.y||(this.Options.Offset=new s(10,10));var e=document.getElementById("db-tooltip-container"),i=e.offsetHeight,o=e.offsetWidth,a=t.clientX+this.Options.Offset.x,r=window.innerHeight-t.clientY+this.Options.Offset.y;t.clientY-i-this.Options.Offset.y<0&&(r-=t.clientY+i+this.Options.Offset.y<=window.innerHeight?i+2*this.Options.Offset.y:i/2-this.Options.Offset.y),window.innerWidth-t.clientX-o-this.Options.Offset.x<this.Options.Offset.x&&(a-=o+2*this.Options.Offset.x),e.style.left=n(a),e.style.bottom=n(r)}},o.bindEvent(window,"load",function(){this.Ready=!0}),t.CurseTip=o}(window||this);var __tip=new CurseTip({Url:"http://www.wowdb.com",Namespace:"wowdb-tooltip",Paths:["spells","items","npcs","quests","achievements","world-events","pet-abilities","currencies","wod-talents","garrison/followers","garrison/ships","garrison/buildings","garrison/abilities","garrison/missions"],Arguments:["gems","itemLevel","enchantment","reforge","extragem","upgradeNum","setPieces","bonusIDs"],LoadingText:'<div class="wowdb-tooltip"><div class="db-tooltip"><div class="db-description" style="width: auto">Loading..</div></div></div>'});"undefined"!=typeof Azeroth&&(Azeroth.CurseTip=__tip);